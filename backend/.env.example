# getstream.io Configuration
STREAM_API_KEY=your_stream_api_key_here
STREAM_API_SECRET=your_stream_api_secret_here

# Server Configuration
PORT=8787
HOST=localhost
ENVIRONMENT=development

# Database Configuration (for later phases)
DATABASE_URL=postgres://user:password@localhost/sidechain?sslmode=disable

# Storage Configuration
STORAGE_PROVIDER=local  # local, s3, r2
AWS_REGION=us-west-2
AWS_BUCKET=sidechain-dev-media
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# CDN Configuration
CDN_BASE_URL=https://cdn.sidechain.app

# Security
JWT_SECRET=your_jwt_secret_here
CORS_ORIGINS=*

# OAuth Configuration - REQUIRED
# For development: http://localhost:8787
# For production: https://api.yourdomain.com
# This is the base URL for OAuth callback endpoints
OAUTH_REDIRECT_URL=http://localhost:8787

# Google OAuth (https://console.developers.google.com)
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# Discord OAuth (https://discord.com/developers/applications)
DISCORD_CLIENT_ID=your_discord_client_id_here
DISCORD_CLIENT_SECRET=your_discord_client_secret_here

# Logging Configuration
LOG_LEVEL=debug
LOG_FILE=server.log

# Redis Configuration (optional, enables distributed caching and rate limiting)
# Leave REDIS_HOST blank to disable Redis (falls back to in-memory)
# When Redis is enabled, provides distributed rate limiting and caching across instances
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Service Validation Configuration
# Set any of these to 1/true/yes/on to require that service to be available at startup
# If set to require, the server will fail to start if the service cannot be reached
SIDECHAIN_BACKEND_REQUIRE_ELASTICSEARCH=
SIDECHAIN_BACKEND_REQUIRE_S3=
SIDECHAIN_BACKEND_REQUIRE_REDIS=
SIDECHAIN_BACKEND_REQUIRE_GORSE=

# Elasticsearch Configuration
# Only required if SIDECHAIN_BACKEND_REQUIRE_ELASTICSEARCH is set
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_SCHEME=http
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

POSTGRES_USER=sidechain
POSTGRES_PASSWORD=sidechain_dev_password
POSTGRES_DB=sidechain

# AWS SES Email Configuration
SES_FROM_EMAIL=noreply@sidechain.live
SES_FROM_NAME=Sidechain
BASE_URL=https://sidechain.live

GORSE_API_KEY=sidechain_gorse_api_key
GORSE_URL=http://localhost:8088

# ============================================
# OpenTelemetry / Distributed Tracing Configuration
# ============================================
# IMPORTANT: OpenTelemetry provides comprehensive visibility into request flows
# through database queries, cache operations, and external service calls.
# See backend/TRACING_GUIDE.md for complete documentation.

# Enable distributed tracing with OpenTelemetry
# Set to "true" to enable, "false" to disable (reduces overhead if not needed)
OTEL_ENABLED=true

# Service identifier in traces and logs (used in Tempo/Grafana)
# Helps identify this service in multi-service tracing
OTEL_SERVICE_NAME=sidechain-backend

# Environment label (development, staging, production)
# Used for filtering traces by environment in Tempo/Grafana
OTEL_ENVIRONMENT=development

# Tempo endpoint for OTLP HTTP protocol
# Where traces are sent for collection and storage
# For Docker Compose: tempo:4318
# For local development: localhost:4318
# For Kubernetes: tempo.monitoring.svc.cluster.local:4318
# For production Grafana Cloud: your-organization.grafana.net/otlp
OTEL_EXPORTER_OTLP_ENDPOINT=tempo:4318

# Trace sampling rate: 1.0 = 100%, 0.1 = 10%, 0.01 = 1%
# Higher sampling = more comprehensive tracing but higher storage/CPU overhead
# Lower sampling = lower overhead but less visibility
# Development/Staging: 1.0 (trace every request for debugging)
# Production: 0.1 (sample 10% to reduce storage overhead)
# High-traffic production: 0.01 (sample 1%)
OTEL_TRACE_SAMPLER_RATE=1.0

# Optional: Enable HTTP/2 for OTLP exporter (faster trace delivery)
# OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf

# Optional: Custom trace headers for authentication to Tempo/Grafana Cloud
# OTEL_EXPORTER_OTLP_HEADERS=Authorization=Bearer your_token_here
